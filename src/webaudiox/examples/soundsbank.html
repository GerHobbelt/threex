<!doctype html>
<body><script>


	var sounds	= {}
	document.body.addEventListener('keydown', function(){
		sounds.eatpill	&& sounds.eatpill()
	})
	
	


	//////////////////////////////////////////////////////////////////////////////////
	//		init sounds							//
	//////////////////////////////////////////////////////////////////////////////////
	;(function(){
		// Fix up prefixing
		window.AudioContext = window.AudioContext || window.webkitAudioContext;
		// init context
		var context	= new AudioContext()
		
		// init each sound
		loadSound('sounds/eatpill.mp3', function(buffer){
			// setup a play function
			sounds.eatpill	= function(){
				var source	= context.createBufferSource();
				source.buffer	= buffer;
				source.connect(context.destination);
				source.start(0);
			}
		})


		return;

		function loadSound(url, onLoad, onError){
			var request	= new XMLHttpRequest()
			request.open('GET', url, true)
			request.responseType	= 'arraybuffer'
			request.onload	= function(){
				context.decodeAudioData(request.response, function(buffer){
					onLoad && onLoad(buffer)
				}, function(){
					onError && onError()
				})
			}
			request.send()
		}	
	})()
</script></body>